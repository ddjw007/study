# 管道

管道是指用于连接读进程和写进程，以实现它们之间通信的共享文件，故又称管道文件。

管道时候一种以先进先出的方式保存一定数量数据的特殊文件，而且管道一般是单向的。

Linux下管道的大小有一定的限制，实际上，管道是一个固定大小的缓冲区。

管道是一个进程连接数据流到另一个进程的通道，它通常用作把一个进程的输出通过管道连接到
另一个进程的输入。

## :palm_tree: 例如

>在Shell中输入命令：

`ls -l | grep per`

`ls`命令会把当前目录中的文件或文件夹都列出来，将本要输出到屏幕上的数据通过管道输出到`grep`进程中。然后，作为`grep`进程的输入，`grep`对输入的信息进行筛选，把存在`per`字符串的那行打印在屏幕上。

## :palm_tree: 管道读写的特点

管道读写是通过标准的无缓冲的输入输出系统调用`read()`和`write()`实现的。

### :deciduous_tree: read()

系统调用`read()`将从一个由管道文件描述符所指的管道中读取指定的字节数到缓冲区。

### :deciduous_tree: write()

数据通过系统调用`write()`写入管道。`write()`系统调用将数据从缓冲区向管道文件描述符所指的管道中写入数据。

## :palm_tree: 管道的局限性

- 数据可以自己读却不能自己写。
- 数据一旦被读，便不在管道中存在，不可重复读取。
- 管道采用半双工通信方式，数据只能在一个方向上流动。
- 只能在有公共祖先的进程间使用管道。

## :palm_tree: 创建管道函数pipe

管道是一种基本的IPC机制，由pipe函数创建：该函数如下：

`int pipe(int filedes[2])`;   
### ~p357


## :palm_tree: 等待子进程终端或结束的函数wait

`wait`函数用于等待子进程中断或结束，进程一旦调用了`wait`，就立即阻塞自己。


管道创建成功以后，创建该管道的进程同时掌握管道的读端和写端。


## :palm_tree: 使用管道的特殊情况





